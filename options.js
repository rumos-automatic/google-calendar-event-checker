(()=>{var m={"add-emoji-check-mark":!0,"add-description-completed-datetime":!0,"add-description-origin-title":!1,"use-strikethrough-effect":!1,"add-emoji-crossed-mark":!1,"enable-reporting":!1},d=Object.keys(m),l={set(o){return new Promise((e,t)=>{chrome.storage.sync.set(o,()=>{let r=chrome.runtime.lastError;if(r){t(r);return}e()})})},get(o){return new Promise(e=>{chrome.storage.sync.get(o,t=>{e(t)})})}};async function f(o){let e=o.target;if(!(e instanceof HTMLInputElement))return;let t=e.id;if(!d.includes(t))return;let s=document.forms[0]?.querySelector("fieldset"),n=document.getElementById("status"),a=d.reduce((i,c)=>{let u=document.getElementById(c);return i[c]=!!u?.checked,i},{});if(!a["add-emoji-check-mark"]&&!a["add-emoji-crossed-mark"]&&!a["use-strikethrough-effect"]){n&&(n.textContent="Either check mark emoji, crossed mark emoji or strikethrough effect should be selected"),e.checked=!0;return}s&&(s.disabled=!0),n&&(n.textContent="");try{await l.set({[t]:e.checked}),n&&(n.textContent="Options saved.")}catch(i){console.error("Failed to save options",i),n&&(n.textContent="Something went wrong. Please refresh page and try again")}finally{s&&(s.disabled=!1)}}async function p(){let o=await l.get(m);d.forEach(e=>{let t=document.getElementById(e);t&&(t.checked=o[e])})}function h(){p(),document.forms[0]?.addEventListener("change",e=>{f(e)})}document.addEventListener("DOMContentLoaded",h);})();
